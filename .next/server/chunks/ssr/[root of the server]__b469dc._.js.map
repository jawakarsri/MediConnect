{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/jawa/Projects/MediConnect/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAKA,MAAM,sBAAQ,sMAAM,UAAU,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,gWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/jawa/Projects/MediConnect/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AAGA;AAFA;AAHA;;;;;AAOA,MAAM,2BAAa,sMAAM,UAAU,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,2KAAoB,IAAI;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,2KAAoB,QAAQ;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,2KAAoB,MAAM;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,2KAAoB,IAAI,CAAC,WAAW;AAE7D,MAAM,0BAAY,sMAAM,UAAU,CAGhC,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,2KAAoB,mBAAmB;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2KAAoB,eAAe;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,2KAAoB,mBAAmB,CAAC,WAAW"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/jawa/Projects/MediConnect/components/password-strength.tsx"],"sourcesContent":["\"use client\";\n\ninterface PasswordStrengthProps {\n  password: string;\n}\n\nexport function PasswordStrength({ password }: PasswordStrengthProps) {\n  const getStrength = (password: string) => {\n    let score = 0;\n    if (!password) return score;\n\n    // Length check\n    if (password.length >= 8) score += 1;\n    if (password.length >= 12) score += 1;\n\n    // Character type checks\n    if (/[A-Z]/.test(password)) score += 1;\n    if (/[a-z]/.test(password)) score += 1;\n    if (/[0-9]/.test(password)) score += 1;\n    if (/[^A-Za-z0-9]/.test(password)) score += 1;\n\n    return Math.min(score, 5);\n  };\n\n  const strength = getStrength(password);\n  const width = `${(strength / 5) * 100}%`;\n\n  const getColor = () => {\n    if (strength <= 2) return \"bg-red-500\";\n    if (strength <= 3) return \"bg-yellow-500\";\n    if (strength <= 4) return \"bg-blue-500\";\n    return \"bg-green-500\";\n  };\n\n  const getMessage = () => {\n    if (!password) return \"Enter password\";\n    if (strength <= 2) return \"Weak\";\n    if (strength <= 3) return \"Fair\";\n    if (strength <= 4) return \"Good\";\n    return \"Strong\";\n  };\n\n  return (\n    <div className=\"w-full space-y-1\">\n      <div className=\"h-1.5 w-full bg-muted rounded-full overflow-hidden\">\n        <div\n          className={`h-full transition-all duration-300 ${getColor()}`}\n          style={{ width }}\n        />\n      </div>\n      <p className=\"text-xs text-muted-foreground\">{getMessage()}</p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAMO,SAAS,iBAAiB,EAAE,QAAQ,EAAyB;IAClE,MAAM,cAAc,CAAC;QACnB,IAAI,QAAQ;QACZ,IAAI,CAAC,UAAU,OAAO;QAEtB,eAAe;QACf,IAAI,SAAS,MAAM,IAAI,GAAG,SAAS;QACnC,IAAI,SAAS,MAAM,IAAI,IAAI,SAAS;QAEpC,wBAAwB;QACxB,IAAI,QAAQ,IAAI,CAAC,WAAW,SAAS;QACrC,IAAI,QAAQ,IAAI,CAAC,WAAW,SAAS;QACrC,IAAI,QAAQ,IAAI,CAAC,WAAW,SAAS;QACrC,IAAI,eAAe,IAAI,CAAC,WAAW,SAAS;QAE5C,OAAO,KAAK,GAAG,CAAC,OAAO;IACzB;IAEA,MAAM,WAAW,YAAY;IAC7B,MAAM,QAAQ,GAAG,AAAC,WAAW,IAAK,IAAI,CAAC,CAAC;IAExC,MAAM,WAAW;QACf,IAAI,YAAY,GAAG,OAAO;QAC1B,IAAI,YAAY,GAAG,OAAO;QAC1B,IAAI,YAAY,GAAG,OAAO;QAC1B,OAAO;IACT;IAEA,MAAM,aAAa;QACjB,IAAI,CAAC,UAAU,OAAO;QACtB,IAAI,YAAY,GAAG,OAAO;QAC1B,IAAI,YAAY,GAAG,OAAO;QAC1B,IAAI,YAAY,GAAG,OAAO;QAC1B,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAW,CAAC,mCAAmC,EAAE,YAAY;oBAC7D,OAAO;wBAAE;oBAAM;;;;;;;;;;;0BAGnB,8OAAC;gBAAE,WAAU;0BAAiC;;;;;;;;;;;;AAGpD"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///Users/jawa/Projects/MediConnect/components/auth-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { Bot, Eye, EyeOff } from \"lucide-react\";\nimport { PasswordStrength } from \"./password-strength\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport { Heart } from \"lucide-react\";\n\nexport function AuthForm() {\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const { signIn, signUp } = useAuth();\n  const { toast } = useToast();\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setError(null);\n\n    if (isSignUp) {\n      if (!name.trim()) {\n        setError(\"Name is required\");\n        return;\n      }\n      if (password.length < 8) {\n        setError(\"Password must be at least 8 characters long\");\n        return;\n      }\n    }\n\n    setLoading(true);\n\n    try {\n      if (isSignUp) {\n        const { data, error } = await signUp(email, password, name);\n        if (error) throw error;\n\n        toast({\n          title: \"Check your email\",\n          description:\n            \"We've sent you a verification link. Please verify your email to sign in.\",\n          duration: 8000,\n        });\n        // Reset form after successful signup\n        setEmail(\"\");\n        setPassword(\"\");\n        setName(\"\");\n        setIsSignUp(false);\n      } else {\n        await signIn(email, password);\n        toast({\n          title: \"Welcome back!\",\n          description: \"You have been successfully signed in.\",\n          duration: 3000,\n        });\n      }\n    } catch (error) {\n      if (error instanceof Error) {\n        // Check if the error is about email confirmation\n        if (error.message.toLowerCase().includes(\"email confirmation\")) {\n          toast({\n            title: \"Check your email\",\n            description: \"Please check your email for the verification link.\",\n            duration: 5000,\n          });\n          // Reset form and switch to sign in\n          setIsSignUp(false);\n          setPassword(\"\");\n        } else {\n          setError(error.message);\n          toast({\n            title: \"Error\",\n            description: error.message,\n            variant: \"destructive\",\n            duration: 5000,\n          });\n        }\n      } else {\n        setError(\"An error occurred\");\n        toast({\n          title: \"Error\",\n          description: \"An unexpected error occurred\",\n          variant: \"destructive\",\n          duration: 5000,\n        });\n      }\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"flex min-h-screen flex-col items-center justify-center p-4\">\n      <div className=\"w-full max-w-sm space-y-6\">\n        <div className=\"flex flex-col items-center space-y-2 text-center\">\n          <div className=\"flex items-center gap-2\">\n            <Heart className=\"h-6 w-6\" />\n            <h1 className=\"text-2xl font-bold\">MediConnect</h1>\n          </div>\n          <p className=\"text-sm text-muted-foreground\">\n            {isSignUp\n              ? \"Create an account to start chatting\"\n              : \"Welcome back! Sign in to continue\"}\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            {isSignUp && (\n              <Input\n                type=\"text\"\n                placeholder=\"Full Name\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                required={isSignUp}\n              />\n            )}\n            <Input\n              type=\"email\"\n              placeholder=\"Email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n            <div className=\"relative\">\n              <Input\n                type={showPassword ? \"text\" : \"password\"}\n                placeholder=\"Password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n              />\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                onClick={() => setShowPassword(!showPassword)}\n              >\n                {showPassword ? (\n                  <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\n                ) : (\n                  <Eye className=\"h-4 w-4 text-muted-foreground\" />\n                )}\n              </Button>\n            </div>\n            {isSignUp && <PasswordStrength password={password} />}\n          </div>\n\n          {error && (\n            <div className=\"text-sm text-red-500 text-center\">{error}</div>\n          )}\n\n          <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n            {loading ? \"Loading...\" : isSignUp ? \"Create Account\" : \"Sign In\"}\n          </Button>\n\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            className=\"w-full\"\n            onClick={() => {\n              setIsSignUp(!isSignUp);\n              setError(null);\n              setName(\"\");\n              setPassword(\"\");\n              setShowPassword(false);\n            }}\n            disabled={loading}\n          >\n            {isSignUp\n              ? \"Already have an account? Sign in\"\n              : \"Don't have an account? Sign up\"}\n          </Button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 469, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///Users/jawa/Projects/MediConnect/components/direct-chat.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Send, Mic } from \"lucide-react\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { supabase } from \"@/lib/supabase\";\n\ntype Message = {\n  id: number;\n  chat_id: number;\n  sender_type: \"user\" | \"admin\";\n  sender_id: string;\n  message: string;\n  created_at: string;\n};\n\ninterface DirectChatProps {\n  initialQuestion?: string;\n  onClose: () => void;\n}\n\nexport function DirectChat({ initialQuestion, onClose }: DirectChatProps) {\n  const { user } = useAuth();\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [chatId, setChatId] = useState<number | null>(null);\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    if (scrollAreaRef.current) {\n      scrollAreaRef.current.scrollTop = scrollAreaRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // Get chat ID and fetch messages\n  useEffect(() => {\n    const fetchChatId = async () => {\n      if (!user) return;\n\n      console.log(\"Fetching active chat for user:\", user.id);\n\n      const { data: chat, error } = await supabase\n        .from(\"direct_chats\")\n        .select(\"id\")\n        .eq(\"user_id\", user.id)\n        .eq(\"status\", \"active\")\n        .order(\"created_at\", { ascending: false })\n        .limit(1)\n        .maybeSingle();\n\n      if (error) {\n        console.error(\"Error fetching chat:\", error);\n        return;\n      }\n\n      if (chat) {\n        console.log(\"Found active chat:\", chat);\n        setChatId(chat.id);\n      } else {\n        console.log(\"No active chat found for user\");\n      }\n    };\n\n    fetchChatId();\n  }, [user]);\n\n  // Poll for new messages\n  useEffect(() => {\n    if (!chatId) return;\n\n    console.log(\"Setting up message polling for chat:\", chatId);\n\n    const fetchMessages = async () => {\n      const { data, error } = await supabase\n        .from(\"chat_messages\")\n        .select(\"*\")\n        .eq(\"chat_id\", chatId)\n        .order(\"created_at\", { ascending: true });\n\n      if (error) {\n        console.error(\"Error fetching messages:\", error);\n        return;\n      }\n\n      if (data) {\n        console.log(\"Received messages:\", data.length);\n        setMessages(data);\n      }\n    };\n\n    fetchMessages();\n    const interval = setInterval(fetchMessages, 3000);\n\n    return () => clearInterval(interval);\n  }, [chatId]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!input.trim() || !user || !chatId) return;\n\n    setIsLoading(true);\n    const message = input.trim();\n    setInput(\"\");\n\n    try {\n      const { error } = await supabase.from(\"chat_messages\").insert({\n        chat_id: chatId,\n        sender_type: \"user\",\n        sender_id: user.id,\n        message: message,\n      });\n\n      if (error) throw error;\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-[600px] w-full max-w-2xl mx-auto bg-background border rounded-lg\">\n      <div className=\"p-4 border-b flex justify-between items-center\">\n        <h2 className=\"font-semibold\">Support Chat</h2>\n        <Button variant=\"ghost\" onClick={onClose}>\n          Close\n        </Button>\n      </div>\n\n      <ScrollArea className=\"flex-1 p-4\" ref={scrollAreaRef}>\n        <div className=\"space-y-4\">\n          {messages.map((message) => (\n            <div\n              key={message.id}\n              className={`flex ${\n                message.sender_type === \"admin\"\n                  ? \"justify-start\"\n                  : \"justify-end\"\n              }`}\n            >\n              <div\n                className={`max-w-[80%] rounded-lg p-3 ${\n                  message.sender_type === \"admin\"\n                    ? \"bg-muted\"\n                    : \"bg-primary text-primary-foreground\"\n                }`}\n              >\n                {message.message}\n              </div>\n            </div>\n          ))}\n        </div>\n      </ScrollArea>\n\n      <form onSubmit={handleSubmit} className=\"p-4 border-t\">\n        <div className=\"flex gap-2\">\n          <Input\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder=\"Type your message...\"\n            disabled={isLoading}\n            className=\"flex-1\"\n          />\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => {\n              if (\"webkitSpeechRecognition\" in window) {\n                const recognition = new (\n                  window as any\n                ).webkitSpeechRecognition();\n                recognition.continuous = false;\n                recognition.interimResults = false;\n                recognition.lang = \"en-US\";\n\n                recognition.onresult = (event: any) => {\n                  const transcript = event.results[0][0].transcript;\n                  setInput(transcript);\n                };\n\n                recognition.start();\n              } else {\n                alert(\"Speech recognition is not supported in your browser.\");\n              }\n            }}\n            disabled={isLoading}\n          >\n            <Mic className=\"h-4 w-4\" />\n          </Button>\n          <Button type=\"submit\" disabled={isLoading}>\n            <Send className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":["file:///Users/jawa/Projects/MediConnect/app/auth/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { Send, Github, Bot, Mic } from \"lucide-react\";\nimport { ThemeToggle } from \"@/components/theme-toggle\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { AuthForm } from \"@/components/auth-form\";\nimport { supabase } from \"@/lib/supabase\";\nimport { DirectChat } from \"@/components/direct-chat\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport { useRouter } from \"next/navigation\";\n\ntype Message = {\n  role: \"user\" | \"bot\";\n  content: string;\n  source?: \"database\" | \"gemini\" | \"escalated\" | \"staff\" | \"system\";\n};\n\nconst LoadingSkeleton = () => (\n  <div className=\"flex gap-3\">\n    <div className=\"w-8 h-8 rounded-full bg-muted flex items-center justify-center shrink-0\">\n      <div className=\"w-4 h-4 bg-muted-foreground/20 rounded animate-pulse\" />\n    </div>\n    <div className=\"space-y-2.5 flex-1\">\n      <div className=\"h-4 bg-muted-foreground/20 rounded animate-pulse w-32\" />\n      <div className=\"h-4 bg-muted-foreground/20 rounded animate-pulse w-64\" />\n      <div className=\"h-4 bg-muted-foreground/20 rounded animate-pulse w-48\" />\n    </div>\n  </div>\n);\n\ninterface NavbarProps {\n  position: \"top\" | \"bottom\";\n  input?: string;\n  setInput?: (value: string) => void;\n  isLoading?: boolean;\n}\n\nconst Navbar = ({ position, input = \"\", setInput, isLoading }: NavbarProps) => (\n  <nav\n    className={`w-full border-${\n      position === \"top\" ? \"b\" : \"t\"\n    } border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 h-14 flex items-center`}\n  >\n    <div className=\"container flex max-w-3xl px-2 items-center mx-auto\">\n      {position === \"top\" ? (\n        <>\n          <div className=\"flex items-center gap-2 font-bold\">\n            <Bot className=\"h-5 w-5\" />\n            <span>MediConnect</span>\n          </div>\n          <div className=\"flex flex-1 items-center justify-end space-x-2\">\n            <ThemeToggle />\n          </div>\n        </>\n      ) : (\n        <div className=\"flex w-full gap-3\">\n          <Input\n            value={input}\n            onChange={(e) => setInput?.(e.target.value)}\n            placeholder=\"Type your message...\"\n            disabled={isLoading}\n            className=\"flex-1\"\n          />\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => {\n              if (\"webkitSpeechRecognition\" in window) {\n                const recognition = new (\n                  window as any\n                ).webkitSpeechRecognition();\n                recognition.continuous = false;\n                recognition.interimResults = false;\n                recognition.lang = \"en-US\";\n\n                recognition.onresult = (event: any) => {\n                  const transcript = event.results[0][0].transcript;\n                  setInput?.(transcript);\n                };\n\n                recognition.start();\n              } else {\n                alert(\"Speech recognition is not supported in your browser.\");\n              }\n            }}\n            disabled={isLoading}\n          >\n            <Mic className=\"h-4 w-4\" />\n          </Button>\n          <Button type=\"submit\" disabled={isLoading} size=\"icon\">\n            <Send className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  </nav>\n);\n\nexport default function Home() {\n  const { user, profile, loading } = useAuth();\n  const router = useRouter();\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      role: \"bot\",\n      content: \"Hello! I'm your AI assistant. How can I help you today?\",\n    },\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\n  const [showDirectChat, setShowDirectChat] = useState(false);\n  const [pendingQuestion, setPendingQuestion] = useState<string>(\"\");\n\n  useEffect(() => {\n    if (scrollAreaRef.current) {\n      scrollAreaRef.current.scrollTop = scrollAreaRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  useEffect(() => {\n    if (user && profile) {\n      setMessages([\n        {\n          role: \"bot\",\n          content: `Hello ${\n            profile.full_name || user.email\n          }! I'm your AI assistant. How can I help you today?`,\n        },\n      ]);\n    }\n  }, [user, profile]);\n\n  const getInitial = (name: string | undefined) => {\n    return ((name || \"U\").charAt(0) || \"U\").toUpperCase();\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!input.trim() || isLoading || !user) return;\n\n    const userMessage = input.trim();\n    setInput(\"\");\n    setMessages((prev) => [...prev, { role: \"user\", content: userMessage }]);\n    setIsLoading(true);\n\n    try {\n      // Send the request\n      const response = await fetch(\"/api/chat\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ message: userMessage }),\n      });\n\n      const data = await response.json();\n      if (!response.ok)\n        throw new Error(data.error || `HTTP error! status: ${response.status}`);\n\n      // Add bot's response\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: \"bot\",\n          content: data.response,\n          source: data.source,\n        },\n      ]);\n\n      // If no similar question found in database, show options\n      if (data.source === \"gemini\") {\n        setMessages((prev) => [\n          ...prev,\n          {\n            role: \"bot\",\n            content: \"Would you like to chat with our support staff?\",\n            source: \"system\",\n          },\n        ]);\n        setPendingQuestion(userMessage);\n      }\n    } catch (error) {\n      console.error(\"Chat error:\", error);\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: \"bot\",\n          content:\n            error instanceof Error\n              ? `Error: ${error.message}`\n              : \"An error occurred. Please try again.\",\n        },\n      ]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Simplify the support chat function\n  const startSupportChat = async () => {\n    if (!user) {\n      toast({\n        title: \"Error\",\n        description: \"Please login to chat with support.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      console.log(\"Starting support chat for user:\", user.id);\n\n      // Create a new chat\n      const { data: chat, error: chatError } = await supabase\n        .from(\"direct_chats\")\n        .insert({\n          user_id: user.id,\n          status: \"active\",\n          updated_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n\n      if (chatError) {\n        console.error(\"Error creating chat:\", chatError);\n        throw chatError;\n      }\n\n      if (!chat) {\n        throw new Error(\"Failed to create chat\");\n      }\n\n      console.log(\"Chat created:\", chat);\n\n      // Add the first message if there's a pending question\n      if (pendingQuestion) {\n        const { error: messageError } = await supabase\n          .from(\"chat_messages\")\n          .insert({\n            chat_id: chat.id,\n            sender_type: \"user\",\n            sender_id: user.id,\n            message: pendingQuestion,\n          });\n\n        if (messageError) {\n          console.error(\"Error creating message:\", messageError);\n          throw messageError;\n        }\n\n        console.log(\"Initial message added to chat\");\n      }\n\n      // Show success message\n      toast({\n        title: \"Success\",\n        description: \"Chat started with support staff.\",\n      });\n\n      // Clear pending question\n      setPendingQuestion(\"\");\n\n      // Show chat interface\n      setShowDirectChat(true);\n    } catch (error) {\n      console.error(\"Error starting chat:\", error);\n      toast({\n        title: \"Error\",\n        description:\n          error instanceof Error\n            ? error.message\n            : \"Failed to start chat. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  // Poll for answer to escalated question\n  const pollForAnswer = async (question: string) => {\n    const pollInterval = setInterval(async () => {\n      try {\n        const { data, error } = await supabase\n          .from(\"conversations\")\n          .select(\"answer, status\")\n          .eq(\"question\", question)\n          .single();\n\n        if (error) throw error;\n\n        if (data && data.status === \"answered\") {\n          clearInterval(pollInterval);\n          setMessages((prev) => {\n            const lastIndex = prev.length - 1;\n            if (prev[lastIndex].content.includes(\"healthcare support staff\")) {\n              // Replace the \"waiting\" message with the actual answer\n              return [\n                ...prev.slice(0, -1),\n                {\n                  role: \"bot\",\n                  content: data.answer,\n                  source: \"staff\",\n                },\n              ];\n            }\n            return prev;\n          });\n        }\n      } catch (error) {\n        console.error(\"Polling error:\", error);\n        clearInterval(pollInterval);\n      }\n    }, 5000); // Poll every 5 seconds\n\n    // Clean up interval on component unmount\n    return () => clearInterval(pollInterval);\n  };\n\n  // Render loading state\n  if (loading) {\n    return (\n      <div className=\"flex h-screen items-center justify-center\">\n        <LoadingSkeleton />\n      </div>\n    );\n  }\n\n  // Render auth form\n  if (!user) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen p-4\">\n        <div className=\"w-full max-w-sm space-y-6\">\n          <AuthForm />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col h-screen overflow-hidden\">\n      <main className=\"flex-1 container max-w-3xl mx-auto overflow-hidden mt-2\">\n        <ScrollArea className=\"h-[calc(100vh-7rem)] px-6\">\n          <div className=\"py-2 space-y-2\">\n            {messages.map((message, index) => (\n              <div\n                key={index}\n                className={`flex ${\n                  message.role === \"user\" ? \"justify-end\" : \"justify-start\"\n                }`}\n              >\n                <div\n                  className={`flex gap-2 max-w-[80%] ${\n                    message.role === \"bot\"\n                      ? \"items-start\"\n                      : \"items-end flex-row-reverse\"\n                  }`}\n                >\n                  <div\n                    className={`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${\n                      message.role === \"bot\"\n                        ? \"bg-primary/10 text-primary\"\n                        : \"bg-primary/20 text-primary dark:bg-zinc-700 dark:text-zinc-300\"\n                    }`}\n                  >\n                    {message.role === \"bot\" ? (\n                      <Bot className=\"h-5 w-5\" />\n                    ) : (\n                      <span className=\"text-base font-medium\">\n                        {getInitial(profile?.full_name || user.email)}\n                      </span>\n                    )}\n                  </div>\n                  <div\n                    className={`px-3 py-2 rounded-2xl ${\n                      message.role === \"bot\"\n                        ? \"bg-muted/50 dark:bg-zinc-800 rounded-tl-sm\"\n                        : \"bg-primary/10 dark:bg-zinc-700 rounded-tr-sm dark:text-white\"\n                    }`}\n                  >\n                    <div\n                      className={`prose prose-sm max-w-none ${\n                        message.role === \"bot\" ? \"dark:prose-invert\" : \"\"\n                      }`}\n                    >\n                      {message.role === \"bot\" ? (\n                        message.content.includes(\"healthcare support staff\") ? (\n                          <div className=\"space-y-2\">\n                            <ReactMarkdown remarkPlugins={[remarkGfm]}>\n                              {message.content}\n                            </ReactMarkdown>\n                            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                              <div className=\"w-4 h-4 rounded-full bg-primary/20 animate-pulse\" />\n                              Waiting for staff response...\n                            </div>\n                          </div>\n                        ) : (\n                          <ReactMarkdown\n                            remarkPlugins={[remarkGfm]}\n                            components={{\n                              pre: ({ node, ...props }) => (\n                                <div className=\"relative my-2\">\n                                  <pre\n                                    className=\"overflow-auto rounded-md bg-background/50 p-3 text-sm\"\n                                    {...props}\n                                  />\n                                </div>\n                              ),\n                              code: ({\n                                node,\n                                inline,\n                                className,\n                                ...props\n                              }: {\n                                node?: any;\n                                inline?: boolean;\n                                className?: string;\n                                [key: string]: any;\n                              }) =>\n                                inline ? (\n                                  <code\n                                    className=\"rounded bg-background/50 px-1 py-0.5 font-mono text-sm\"\n                                    {...props}\n                                  />\n                                ) : (\n                                  <code className=\"text-sm\" {...props} />\n                                ),\n                              table: ({ children }) => (\n                                <div className=\"my-2 overflow-auto\">\n                                  <table className=\"w-full border-collapse border rounded-md border-border text-sm\">\n                                    {children}\n                                  </table>\n                                </div>\n                              ),\n                              th: ({ children }) => (\n                                <th className=\"border border-border bg-background/50 px-3 py-1 text-left\">\n                                  {children}\n                                </th>\n                              ),\n                              td: ({ children }) => (\n                                <td className=\"border border-border px-3 py-1\">\n                                  {children}\n                                </td>\n                              ),\n                              p: ({ children }) => (\n                                <p className=\"leading-relaxed mb-1 last:mb-0\">\n                                  {children}\n                                </p>\n                              ),\n                            }}\n                          >\n                            {message.content}\n                          </ReactMarkdown>\n                        )\n                      ) : (\n                        <p className=\"leading-relaxed text-sm text-foreground dark:text-white\">\n                          {message.content}\n                        </p>\n                      )}\n                      {message.source && (\n                        <div className=\"mt-1 text-xs text-muted-foreground\">\n                          Source: {message.source}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n            {isLoading && (\n              <div className=\"flex justify-start\">\n                <div className=\"flex gap-2 max-w-[80%] items-start\">\n                  <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center shrink-0\">\n                    <Bot className=\"h-5 w-5\" />\n                  </div>\n                  <div className=\"px-3 py-2 rounded-2xl bg-muted/50 rounded-tl-sm\">\n                    <LoadingSkeleton />\n                  </div>\n                </div>\n              </div>\n            )}\n            {pendingQuestion && (\n              <div className=\"flex justify-center gap-2 mb-4\">\n                <Button variant=\"outline\" onClick={startSupportChat}>\n                  Chat with Support\n                </Button>\n              </div>\n            )}\n            {showDirectChat && (\n              <div className=\"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n                <DirectChat\n                  initialQuestion={pendingQuestion}\n                  onClose={() => {\n                    setShowDirectChat(false);\n                    setPendingQuestion(\"\");\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n      </main>\n\n      <form onSubmit={handleSubmit}>\n        <Navbar\n          position=\"bottom\"\n          input={input}\n          setInput={setInput}\n          isLoading={isLoading}\n        />\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1539, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}