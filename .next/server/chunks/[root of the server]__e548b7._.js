module.exports = {

"[externals]/next/dist/compiled/next-server/app-route.runtime.dev.js [external] (next/dist/compiled/next-server/app-route.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-route.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page.runtime.dev.js [external] (next/dist/compiled/next-server/app-page.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-page.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/punycode [external] (punycode, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("punycode", () => require("punycode"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[project]/lib/supabase.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "supabase": (()=>supabase)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/@supabase/supabase-js/dist/module/index.js [app-route] (ecmascript) <locals>");
;
// Hardcoded values (for development only)
const supabaseUrl = "https://qfqknamuvypndphwehbl.supabase.co";
const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFmcWtuYW11dnlwbmRwaHdlaGJsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzcyMjc0NTksImV4cCI6MjA1MjgwMzQ1OX0.i3gHL4uQKuM-U5be379PyXvjTaJNUGuKWO6wO0rKd7w";
const supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["createClient"])(supabaseUrl, supabaseAnonKey);
// Test the connection only in browser
if ("TURBOPACK compile-time falsy", 0) {
    "TURBOPACK unreachable";
    async function testConnection() {
        try {
            "TURBOPACK unreachable", undefined;
            const { data: { session }, error } = ("TURBOPACK unreachable", undefined);
            if ("TURBOPACK unreachable", undefined) {
                "TURBOPACK unreachable", undefined;
            } else {
                "TURBOPACK unreachable", undefined;
            }
        } catch (error) {
            "TURBOPACK unreachable", undefined;
        }
    }
}
}}),
"[project]/lib/embeddings.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "findSimilarQuestions": (()=>findSimilarQuestions),
    "getEmbedding": (()=>getEmbedding),
    "storeConversation": (()=>storeConversation)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/lib/supabase.ts [app-route] (ecmascript)");
;
async function getEmbedding(text) {
    try {
        console.log("Generating embedding for:", text.substring(0, 50) + "...");
        // Normalize and tokenize the text
        const normalizedText = text.toLowerCase().replace(/[^a-z0-9\s]/g, "").trim().replace(/\s+/g, " ");
        const words = normalizedText.split(/\s+/);
        // Create a fixed-size embedding (768 dimensions)
        const embedding = new Array(768).fill(0);
        // For each word, create a more sophisticated embedding
        words.forEach((word, wordIndex)=>{
            // Use word position for context
            const positionFactor = (wordIndex + 1) / words.length;
            // Generate word-level features
            const wordChars = Array.from(word);
            const wordLength = word.length;
            wordChars.forEach((char, charIndex)=>{
                // Distribute character information across the embedding
                const charCode = char.charCodeAt(0);
                const relativePosition = charIndex / wordLength;
                // Use multiple positions for each character to capture more patterns
                const positions = [
                    (wordIndex * 50 + charIndex) % 768,
                    charCode * positionFactor * 10 % 768,
                    (wordLength * 20 + charIndex * 3) % 768
                ];
                positions.forEach((pos)=>{
                    embedding[pos] = (embedding[pos] + charCode / 255 * (1 - relativePosition)) / 2;
                });
            });
        });
        // Normalize the embedding
        const magnitude = Math.sqrt(embedding.reduce((sum, val)=>sum + val * val, 0));
        const normalizedEmbedding = embedding.map((val)=>val / (magnitude || 1));
        console.log(`Generated embedding of length ${normalizedEmbedding.length}`);
        return normalizedEmbedding;
    } catch (error) {
        console.error("Error generating embedding:", error);
        if (error instanceof Error) {
            console.error("Error details:", error.message);
            console.error("Error stack:", error.stack);
        }
        throw error;
    }
}
function normalizeText(text) {
    return text.toLowerCase().trim().replace(/[^a-z0-9\s]/g, "").replace(/\s+/g, " ");
}
function calculateSimilarity(text1, text2) {
    const normalized1 = normalizeText(text1);
    const normalized2 = normalizeText(text2);
    // Exact match
    if (normalized1 === normalized2) return 1;
    const words1 = normalized1.split(" ");
    const words2 = normalized2.split(" ");
    // If lengths are too different, reduce similarity
    const lengthDiff = Math.abs(words1.length - words2.length);
    if (lengthDiff > Math.min(words1.length, words2.length)) {
        return 0.1;
    }
    // Calculate word-level similarity with position importance
    let matchScore = 0;
    let totalScore = Math.max(words1.length, words2.length);
    for(let i = 0; i < words1.length; i++){
        const word1 = words1[i];
        let bestWordMatch = 0;
        for(let j = 0; j < words2.length; j++){
            const word2 = words2[j];
            let wordSimilarity = 0;
            // Exact word match with position bonus
            if (word1 === word2) {
                const positionDiff = Math.abs(i - j);
                const positionPenalty = positionDiff / Math.max(words1.length, words2.length);
                wordSimilarity = 1 - positionPenalty * 0.5; // Position affects up to 50% of word score
            } else if (word1.length >= 4 && word2.length >= 4) {
                // Check for substring match
                if (word1.includes(word2) || word2.includes(word1)) {
                    wordSimilarity = 0.7;
                } else {
                    // Calculate character-level similarity
                    const commonChars = [
                        ...word1
                    ].filter((char)=>word2.includes(char)).length;
                    const charSimilarity = commonChars / Math.max(word1.length, word2.length);
                    // Only count if significant character overlap
                    if (charSimilarity > 0.6) {
                        wordSimilarity = charSimilarity * 0.5; // Character similarity worth up to 50%
                    }
                }
            }
            bestWordMatch = Math.max(bestWordMatch, wordSimilarity);
        }
        // Apply word position importance
        const positionImportance = 1 - i / words1.length * 0.3; // Earlier words are more important
        matchScore += bestWordMatch * positionImportance;
    }
    // Calculate final similarity score
    let similarity = matchScore / totalScore;
    // Additional penalties for significant differences
    if (words1.length !== words2.length) {
        similarity *= 0.9; // 10% penalty for different lengths
    }
    // Threshold to avoid very low similarity matches
    return similarity < 0.3 ? 0 : similarity;
}
async function findSimilarQuestions(question, threshold = 0.3 // Lowered threshold for better matching
) {
    try {
        const normalizedQuestion = normalizeText(question);
        console.log("Finding similar questions for:", normalizedQuestion);
        // First try direct text matching
        const { data: directMatches } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from("conversations").select("question, answer").ilike("question", `%${normalizedQuestion}%`).limit(5);
        if (directMatches?.length) {
            console.log("Found direct matches:", directMatches.length);
            const bestDirectMatch = directMatches.reduce((best, current)=>{
                const similarity = calculateSimilarity(normalizedQuestion, current.question);
                return similarity > (best?.similarity || 0) ? {
                    ...current,
                    similarity
                } : best;
            }, null);
            if (bestDirectMatch?.similarity >= threshold) {
                console.log("Best direct match:", bestDirectMatch);
                return {
                    question: bestDirectMatch.question,
                    answer: bestDirectMatch.answer
                };
            }
        }
        // If no direct matches, try vector similarity
        const questionEmbedding = await getEmbedding(normalizedQuestion);
        const { data: similarQuestions, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].rpc("match_questions", {
            query_embedding: questionEmbedding,
            match_threshold: 0.1,
            match_count: 10
        });
        if (error) {
            console.error("Error in match_questions RPC:", error);
            return null;
        }
        if (!similarQuestions?.length) {
            console.log("No similar questions found");
            return null;
        }
        console.log("Found potential matches:", similarQuestions.length);
        // Find best match using both vector and text similarity
        const bestMatch = similarQuestions.reduce((best, current)=>{
            const similarity = calculateSimilarity(normalizedQuestion, current.question);
            console.log(`Similarity for "${current.question}": ${similarity}`);
            return similarity > (best?.similarity || 0) ? {
                ...current,
                similarity
            } : best;
        }, null);
        if (bestMatch?.similarity >= threshold) {
            console.log("Best match found:", bestMatch);
            return {
                question: bestMatch.question,
                answer: bestMatch.answer
            };
        }
        console.log("No match above threshold found");
        return null;
    } catch (error) {
        console.error("Error finding similar questions:", error);
        return null;
    }
}
async function storeConversation(question, answer) {
    try {
        const normalizedQuestion = normalizeText(question);
        const embedding = await getEmbedding(normalizedQuestion);
        const { data: existing } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from("conversations").select("id, question").eq("question", normalizedQuestion).limit(1);
        if (existing?.length) {
            return existing[0];
        }
        const similarQuestion = await findSimilarQuestions(normalizedQuestion, 0.9);
        if (similarQuestion) {
            return similarQuestion;
        }
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from("conversations").insert([
            {
                question: normalizedQuestion,
                answer,
                embedding
            }
        ]).select();
        if (error) {
            throw error;
        }
        return data?.[0] || null;
    } catch (error) {
        console.error("Error storing conversation:", error);
        throw error;
    }
}
}}),
"[project]/app/api/chat/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "POST": (()=>POST)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$google$2f$generative$2d$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@google/generative-ai/dist/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$embeddings$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/lib/embeddings.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/lib/supabase.ts [app-route] (ecmascript)");
;
;
;
// Initialize Gemini with hardcoded API key for now
const genAI = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$google$2f$generative$2d$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["GoogleGenerativeAI"]("AIzaSyBVdtTryQ4U__ThmJVpX1DHCRmDBIme7DU");
// Get the chat model
const model = genAI.getGenerativeModel({
    model: "gemini-pro"
});
async function checkForAnswer(question) {
    const { data: conversations, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from("conversations").select("answer").eq("question", question).limit(1).single();
    if (error || !conversations) {
        return null;
    }
    return conversations.answer;
}
async function POST(req) {
    try {
        const body = await req.json();
        const question = body.message;
        console.log("Received question:", question);
        // First check for similar questions in the database
        const similarQuestion = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$embeddings$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findSimilarQuestions"])(question);
        if (similarQuestion) {
            console.log("Found similar question:", similarQuestion);
            return new Response(JSON.stringify({
                response: similarQuestion.answer,
                source: "database"
            }));
        }
        // Check if this question has been answered by staff
        const staffAnswer = await checkForAnswer(question);
        if (staffAnswer) {
            return new Response(JSON.stringify({
                response: staffAnswer,
                source: "staff"
            }));
        }
        // If no similar question found, use Gemini to generate an answer
        const chat = model.startChat({
            generationConfig: {
                temperature: 0.7,
                topK: 1,
                topP: 1,
                maxOutputTokens: 2048
            }
        });
        const result = await chat.sendMessage(question);
        const response = await result.response;
        const answer = response.text();
        if (!answer) {
            throw new Error("Empty response from Gemini");
        }
        return new Response(JSON.stringify({
            response: answer,
            source: "gemini"
        }));
    } catch (error) {
        console.error("Error in chat route:", error);
        return new Response(JSON.stringify({
            error: "Failed to process request",
            details: error instanceof Error ? error.message : String(error)
        }), {
            status: 500
        });
    }
}
}}),
"[project]/ (server-utils)": ((__turbopack_context__) => {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, t: __turbopack_require_real__ } = __turbopack_context__;
{
}}),

};

//# sourceMappingURL=%5Broot%20of%20the%20server%5D__e548b7._.js.map